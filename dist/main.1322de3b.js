"use strict";(self.webpackChunkespcdb_website=self.webpackChunkespcdb_website||[]).push([[179],{7094:(e,t,s)=>{var n=s(8076),i=s(7778),a=s.n(i),r=s(6270),o=s.n(r),l=s(7976),h=s.n(l);class c{constructor({element:e,elements:t}){this.selector=e,this.selectorChildren={...t},this.create(),this.addEventListeners()}create(){this.selector instanceof window.HTMLElement?this.element=this.selector:this.element=document.querySelector(this.selector),this.elements={},o()(this.selectorChildren,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=document.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=document.querySelector(e)))}))}addEventListeners(){}removeEventListeners(){}}class d extends c{constructor({element:e,elements:t}){super({element:e,elements:t}),this.createObserver(),this.animateOut()}createObserver(){this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(this.animateIn(),this.observer.unobserve(e.target)):this.animateOut()}))})),this.observer.observe(this.element)}animateIn(){}animateOut(){}}var m=s(7043);function u({element:e,expression:t=" ",append:s=!0}){const n=function(e,t){const s=e.split("<br>");let n=[];return o()(s,((e,s)=>{s>0&&n.push("<br>"),n=n.concat(e.split(t));let i=!1,a="";const r=[];o()(n,(e=>{i||!e.includes("<a")&&!e.includes("<strong")||(a="",i=!0),i&&(a+=` ${e}`),i&&(e.includes("/a>")||e.includes("/strong>"))&&(r.push(a),a=""),i||""!==a||r.push(e),i&&(e.includes("/a>")||e.includes("/strong>"))&&(i=!1)})),n=r})),n}(e.innerHTML.toString().trim(),t);let i="";o()(n,(e=>{if(e.indexOf("<br>")>-1){const t=e.split("<br>");o()(t,((e,t)=>{i+=t>0?"<br>"+g(e):g(e)}))}else i+=g(e)})),e.innerHTML=i;const a=e.querySelectorAll("span");return s&&o()(a,(e=>{const t=1===e.textContent.length,s=""!==e.innerHTML.trim(),n="&"!==e.textContent,i="-"!==e.textContent;t&&s&&n&&i&&(e.innerHTML=`${e.textContent}&nbsp;`)})),a}function p(e){const t=[];let s=[],n=e[0].offsetTop;return o()(e,((i,a)=>{i.offsetTop===n&&s.push(i),i.offsetTop!==n&&(t.push(s),s=[],s.push(i),n=i.offsetTop),a+1===e.length&&t.push(s)})),t}function g(e){return""===(e=e.trim())||" "===e?e:"<br>"===e?"<br>":`<span>${e}</span>`+(e.length>1?" ":"")}class w extends d{constructor({element:e,elements:t}){super({element:e,elements:t}),u({element:this.element,append:!0}),this.isRightAligned=!1,this.elementLinesSpans=this.element.querySelectorAll("span"),this.element.dataset.align&&(this.isRightAligned=!0)}animateIn(){this.timelineIn=m.ZP.timeline({delay:.5}),o()(this.elementLines,((e,t)=>{this.timelineIn.fromTo(e,{autoAlpha:0,x:this.isRightAligned?-100:100},{autoAlpha:1,x:0,delay:.2*t,duration:2,ease:"expo.out"},0)}))}animateOut(){}onResize(){this.elementLines=p(this.elementLinesSpans)}}class f extends d{constructor({element:e,elements:t}){super({element:e,elements:t}),u({element:this.element,append:!0}),u({element:this.element,append:!0}),this.elementLinesSpans=this.element.querySelectorAll("span")}animateIn(){this.timelineIn=m.ZP.timeline({delay:.2}),this.timelineIn.set(this.element,{autoAlpha:1}),o()(this.elementLines,((e,t)=>{this.timelineIn.fromTo(e,{yPercent:100},{yPercent:0,duration:1.5,ease:"expo.out"},0)}))}animateOut(){m.ZP.set(this.element,{autoAlpha:0})}onResize(){this.elementLines=p(this.elementLinesSpans)}}class v extends d{constructor({element:e,elements:t}){super({element:e,elements:t})}animateIn(){this.timelineIn=m.ZP.timeline({delay:.5}),this.timelineIn.fromTo(this.element,{scaleX:0,transformOrigin:"left center"},{scaleX:1,ease:"power3.out",duration:1.5,delay:.2})}animateOut(){}onResize(){}}class x{constructor({id:e,element:t,elements:s}){this.selector=t,this.selectorChildren={animationsTitles:'[data-animation="title"]',animationsParagraphs:'[data-animation="paragraph"]',animationsLines:'[data-animation="line"]',...s},this.id=e}create(){this.element=document.querySelector(this.selector),this.elements={},o()(this.selectorChildren,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=document.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=document.querySelector(e)))})),this.createAnimations()}createAnimations(){this.animations=[],this.animationsTitles=h()(this.elements.animationsTitles,(e=>new w({element:e}))),this.animations.push(...this.animationsTitles),this.animationsParagraphs=h()(this.elements.animationsParagraphs,(e=>new f({element:e}))),this.animations.push(...this.animationsParagraphs),this.animationsLines=h()(this.elements.animationsLines,(e=>new v({element:e})))}onResize(){o()(this.animations,(e=>{e.onResize()}))}}class b extends c{constructor(){super({element:".js-hero__slider",elements:{nextButton:".js-hero__control--next",prevButton:".js-hero__control--prev",counter:".js-slide__number",images:document.querySelectorAll(".js-slide__image")}}),this.data={current:0,last:0,total:this.elements.images.length-1},this.state={animating:!1},this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.elements.counter.innerHTML="1",this.init()}changeSlideNext(){this.state.animating=!0;const e=this.elements.images[this.data.last],t=this.elements.images[this.data.current],s=t.querySelector("img"),n=m.ZP.timeline({paused:!0,defaults:{ease:"expo.inOut",duration:1.5},onComplete:()=>this.state.animating=!1});n.set(t,{autoAlpha:1,zIndex:2}).set(e,{zIndex:1}).fromTo(e,{xPercent:0},{xPercent:-25},0).fromTo(t,{xPercent:100},{xPercent:0},0).fromTo(s,{xPercent:-100,scale:1.4},{xPercent:0,scale:1},0).set(e,{autoAlpha:0}),n.play()}changeSlidePrev(){this.state.animating=!0;const e=this.elements.images[this.data.last],t=this.elements.images[this.data.current],s=t.querySelector("img"),n=m.ZP.timeline({paused:!0,defaults:{ease:"expo.inOut",duration:1.5},onComplete:()=>this.state.animating=!1});n.set(t,{autoAlpha:1,zIndex:2}).set(e,{zIndex:1}).fromTo(e,{xPercent:0},{xPercent:25},0).fromTo(t,{xPercent:-100},{xPercent:0},0).fromTo(s,{xPercent:100,scale:1.4},{xPercent:0,scale:1},0).set(e,{autoAlpha:0,zIndex:1}),n.play()}next(){this.state.animating||(this.data.last=this.data.current,this.data.current=this.data.current===this.data.total?0:this.data.current+1,this.elements.counter.innerHTML=this.data.current+1,this.changeSlideNext())}prev(){this.state.animating||(this.data.last=this.data.current,this.data.current=0===this.data.current?this.data.total:this.data.current-1,this.elements.counter.innerHTML=this.data.current+1,this.changeSlidePrev())}addListeners(){this.elements.nextButton.addEventListener("click",this.next),this.elements.prevButton.addEventListener("click",this.prev)}init(){this.addListeners()}}class L extends c{constructor(){super({element:".js-news__slider",elements:{sliderInner:".js-news__sliderInner",slides:document.querySelectorAll(".js-news__slide"),images:document.querySelectorAll(".js-news__slideImage")}}),this.opts={el:".js-news__slider",ease:.1,speed:1.5,velocity:15},this.onX=0,this.offX=0,this.currentX=0,this.lastX=0,this.isDragging=!1,this.min=0,this.max=0,this.centerX=window.innerWidth/2,this.slidesNumb=this.elements.slides.length,this.bind(),this.init()}bind(){["setPos","setBounds","run","on","off","resize"].forEach((e=>this[e]=this[e].bind(this)))}clamp(){this.currentX=Math.max(Math.min(this.currentX,this.min),this.max)}setBounds(){this.elements.sliderInner.style.width=`calc((65.5rem + 12.1rem) * ${this.slidesNumb})`,this.oneSlideWidth=this.elements.slides[0].getBoundingClientRect().width,this.sliderWidth=this.oneSlideWidth*this.slidesNumb,this.max=-(this.sliderWidth-200)}setPos(e){this.isDragging&&("touchmove"===e.type?this.currentX=this.offX+(e.touches[0].pageX-this.onX)*this.opts.speed:"mousemove"==e.type&&(this.currentX=this.offX+(e.clientX-this.onX)*this.opts.speed),this.clamp())}run(){var e,t,s;this.lastX=(e=this.lastX,t=this.currentX,s=this.opts.ease,m.ZP.utils.interpolate(e,t,s)),this.lastX=Math.floor(100*this.lastX)/100;let n=+((this.currentX-this.lastX)/window.innerWidth);this.elements.sliderInner.style.transform=`translate3D(${this.lastX}px, 0, 0) skewX(${n*this.opts.velocity}deg)`,window.requestAnimationFrame(this.run)}on(e){this.isDragging=!0,this.onX=e.touches?e.touches[0].clientX:e.clientX,this.element.classList.add("is-grabbing")}off(e){this.isDragging=!1,this.offX=this.currentX,this.element.classList.remove("is-grabbing")}resize(){this.setBounds()}init(){this.setBounds(),this.addListeners()}addListeners(){this.run(),this.element.addEventListener("mousemove",this.setPos,{passive:!0}),this.element.addEventListener("mousedown",this.on,!1),this.element.addEventListener("mouseup",this.off,!1),this.element.addEventListener("touchmove",this.setPos,{passive:!0}),this.element.addEventListener("touchstart",this.on,!1),this.element.addEventListener("touchend",this.off,!1),window.addEventListener("resize",this.resize)}}class y extends x{constructor(){super({id:"home",element:"#h"})}create(){super.create(),this.createComponents()}createComponents(){this.homeSlider=new b,this.newsCarousel=new L}}class P extends x{constructor(){super({id:"documents",element:"#d"})}create(){super.create()}}class S extends x{constructor(){super({id:"actualites",element:"#ac"})}create(){super.create()}}class X extends x{constructor(){super({id:"boutique",element:"#b"})}create(){super.create()}}class T extends x{constructor(){super({id:"contact",element:"#cont"})}create(){super.create()}}class _ extends x{constructor(){super({id:"convocations",element:"#conv"})}create(){super.create()}}class A extends x{constructor(){super({id:"partenaires",element:"#p"})}create(){super.create()}}class E extends x{constructor(){super({id:"article",element:"#ar"})}create(){super.create()}}class I extends x{constructor(){super({id:"equipes",element:"#e"})}create(){super.create()}}class C extends x{constructor(){super({id:"staff",element:"#s"})}create(){super.create()}}class q extends x{constructor(){super({id:"historique",element:"#h"})}create(){super.create()}}class z extends c{constructor(){super({element:".preloader",elements:{}}),this.rootElement=document.body,this.bind(),this.init()}bind(){["hide","addEvents"].forEach((e=>this[e]=this[e].bind(this)))}hide(){this.hideTl=m.ZP.timeline({defaults:{duration:.3}}),this.hideTl.fromTo(this.element,{autoAlpha:1},{autoAlpha:0,duration:.3,delay:.5})}addEvents(){window.addEventListener("load",this.hide)}init(){this.addEvents()}}class O extends c{constructor(){super({element:".navigation__desktop",elements:{dropdown:".navigation__dropdown",dropdownContent:".navigation__dropdown__content"}}),this.dDLength=this.elements.dropdown.length,this.bind(),this.init()}bind(){["addEvents","toggle"].forEach((e=>this[e]=this[e].bind(this)))}toggle(e){this.elements.dropdownContent[e].classList.contains("is-shown")||this.elements.dropdownContent.forEach((e=>{e.classList.remove("is-shown")})),this.elements.dropdownContent[e].classList.toggle("is-shown")}addEvents(){for(var e=0;e<this.dDLength;e++)this.elements.dropdown[e].addEventListener("click",this.toggle.bind(null,e))}init(){this.addEvents()}}class M{constructor(){this.createContent(),this.createNavigation(),this.createPages(),this.createPreloader(),this.createSmoothScroll(),this.onResize()}createNavigation(){this.navigation=new O}createPreloader(){this.preloader=new z}createSmoothScroll(){this.scroller=document.body,n.Z.init(this.scroller,{damping:.075})}createContent(){this.content=document.querySelector(".page"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={home:new y,documents:new P,convocations:new _,actualites:new S,boutique:new X,contact:new T,partenaires:new A,article:new E,equipes:new I,staff:new C,historique:new q},this.page=this.pages[this.template],this.page.create()}onResize(){this.page&&this.page.onResize&&this.page.onResize()}}var R=new(a())("Silka"),k=new(a())("Optician Sans"),j=new(a())("Dharma Gothic");Promise.all([R.load(),k.load(),j.load()]).then((e=>{new M})),console.log("%c Designed and developed by Florian Cario","background: #000; color: #fff;")},1478:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[913,912,373,698,617,842],(()=>(t(7094),t(1478))));e.O()}]);